/*! For license information please see phaser_extras.min.js.LICENSE.txt */
class PhaserExtras{clear(){var e=document.getElementsByTagName("canvas");if(e)for(var t of e)t.style&&"none"==t.style.touchAction&&"none"==t.style.userSelect&&t.remove();document.getElementById("ghostery-tracker-tally")?.remove(),document.getElementById("ghostery-box")?.remove(),document.getElementById("ghostery-pb-background")?.remove()}static addGroupSprite(e,t,r,a,n,o){(e=e.physics.add.sprite(t,r,a)).z=100,o&&"function"==typeof o&&o(e),n&&(n.add(e),50<n.getLength())&&n.children.each((e=>{(!e.active||e.y<0||2e3<e.y||e.x<0||2e3<e.x)&&n.remove(e,!0,!0)}))}static VerticalObstacleGenerator(e,t,r,a,n,o,s,i,h,d){var c=PhaserExtras.getSpriteSize(e,o,d),w=Phaser.Math.RND.integerInRange(0,a-n-1);for(let g=0;g<a;g++)if(g<w||g>=w+n){let a=o;g==w+n&&i?a=i:g==w-1&&s&&(a=s),PhaserExtras.addGroupSprite(e,t+c.width,r+g*c.height,a,h,d)}}static RandomVerticalObstacleGenerator(e,t,r,a,n,o,s,i,h){var d=PhaserExtras.getSpriteSize(e,n,h),c=Phaser.Math.RND.integerInRange(0,a);"top"===i&&(r-=d.height);for(let a=1;a<=c;a++)"top"===i?PhaserExtras.addGroupSprite(e,t,r+a*d.height,o&&a===c?o:n,s,h):PhaserExtras.addGroupSprite(e,t,r-a*d.height,o&&a===c?o:n,s,h)}static MatrixBlockGenerator(e,t,r,a=0,n=0,o=10,s,i){let h=0;var d,c,w=PhaserExtras.getSpriteSize(e,t,i),g=w.width+o,l=w.height+o;for(let o=0;o<=7;o++)for(let w=0;w<=7;w++)r[h++]&&(d=w*g+a,c=o*l+n,PhaserExtras.addGroupSprite(e,d,c,t,s,i))}static getSpriteSize(e,t,r){var a=e.textures.get(t);let n=a?.source?.[0]?.width,o=a?.source?.[0]?.height;return n&&o&&!r||((a=e.physics.add.sprite(0,0,t)).visible=!1,r&&"function"==typeof r&&r(a),n=a.width,o=a.height,a.destroy()),{width:n,height:o}}static takeScreenshot(e){if(e&&e.canvas){let a=e.canvas.width,n=e.canvas.height;a/n>270/152?(a=270,n=a/e.canvas.width*e.canvas.height):(n=152,a=n/e.canvas.height*e.canvas.width);var t=document.createElement("canvas"),r=(t.width=270,t.height=152,t.getContext("2d"));return r.fillStyle="rgba(0, 0, 0, 0)",r.fillRect(0,0,t.width,t.height),r.drawImage(e.canvas,0,0,e.canvas.width,e.canvas.height,(270-a)/2,(152-n)/2,a,n),t.toDataURL()}console.warn("Unable to take screenshot for ",e,"!")}static showScreenshot(e){var t=new Image;t.src=PhaserExtras.takeScreenshot(e),window.open("").document.write(t.outerHTML)}static sendScreenshot(e){(e=PhaserExtras.takeScreenshot(e))&&window.parent&&window.parent.postMessage({type:"screenshot",value:e},""+window.location.origin)}static sendError(e){e&&window.parent&&window.parent.postMessage({type:"error",value:e},""+window.location.origin)}static sendRuntimeError(e){e&&window.parent&&window.parent.postMessage({type:"runtime_error",value:e},""+window.location.origin)}}document.addEventListener("DOMContentLoaded",(function(){(new PhaserExtras).clear()})),window.error=function(e,t,r,a,n){PhaserExtras.sendRuntimeError(n)},document.addEventListener("error",(function(e){PhaserExtras.sendError(e)})),window.location.pathname.endsWith("/screenshot")&&window.addEventListener("load",(function(){window.setTimeout((()=>{PhaserExtras.sendScreenshot(window.game)}),750)}));